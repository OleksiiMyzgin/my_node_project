{"version":3,"sources":["../../models/Review.js"],"names":["mongoose","require","Promise","global","reviewSchema","Schema","created","type","Date","default","now","author","ObjectId","ref","required","store","text","String","rating","Number","min","max","autopopulate","next","populate","pre","module","exports","model"],"mappings":";;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACAD,SAASE,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA,IAAME,eAAe,IAAIJ,SAASK,MAAb,CAAoB;AACrCC,aAAS;AACLC,cAAMC,IADD;AAELC,iBAASD,KAAKE;AAFT,KAD4B;AAKrCC,YAAQ;AACJJ,cAAMP,SAASK,MAAT,CAAgBO,QADlB;AAEJC,aAAK,MAFD;AAGJC,kBAAU;AAHN,KAL6B;AAUrCC,WAAO;AACHR,cAAMP,SAASK,MAAT,CAAgBO,QADnB;AAEHC,aAAK,OAFF;AAGHC,kBAAU;AAHP,KAV8B;AAerCE,UAAM;AACFT,cAAMU,MADJ;AAEFH,kBAAU;AAFR,KAf+B;AAmBrCI,YAAQ;AACJX,cAAMY,MADF;AAEJC,aAAK,CAFD;AAGJC,aAAK;AAHD;AAnB6B,CAApB,CAArB;;AA0BA,SAASC,YAAT,CAAsBC,IAAtB,EAA4B;AACxB,SAAKC,QAAL,CAAc,QAAd;AACAD;AACH;;AAEDnB,aAAaqB,GAAb,CAAiB,MAAjB,EAAyBH,YAAzB;AACAlB,aAAaqB,GAAb,CAAiB,SAAjB,EAA4BH,YAA5B;;AAEAI,OAAOC,OAAP,GAAiB3B,SAAS4B,KAAT,CAAe,QAAf,EAAyBxB,YAAzB,CAAjB","file":"Review.js","sourcesContent":["const mongoose = require('mongoose');\nmongoose.Promise = global.Promise;\n\nconst reviewSchema = new mongoose.Schema({\n    created: {\n        type: Date,\n        default: Date.now\n    },\n    author: {\n        type: mongoose.Schema.ObjectId,\n        ref: 'User',\n        required: 'You must supply an author!'\n    },\n    store: {\n        type: mongoose.Schema.ObjectId,\n        ref: 'Store',\n        required: 'You must supple a store!'\n    },\n    text: {\n        type: String,\n        required: 'Your review must have text!'\n    },\n    rating: {\n        type: Number,\n        min: 1,\n        max: 5\n    }\n});\n\nfunction autopopulate(next) {\n    this.populate('author');\n    next();\n}\n\nreviewSchema.pre('find', autopopulate);\nreviewSchema.pre('findOne', autopopulate);\n\nmodule.exports = mongoose.model('Review', reviewSchema);"]}